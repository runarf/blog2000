<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.19.28"/><link as="script" rel="preload" href="/blog2000/component---src-templates-posts-page-layout-js-38b0d6bad39b7329d9de.js"/><link as="script" rel="preload" href="/blog2000/commons-43761f815a48660dedfd.js"/><link as="script" rel="preload" href="/blog2000/app-4fc210ce2ce551dd2bb1.js"/><link as="script" rel="preload" href="/blog2000/webpack-runtime-dc6c6d3488658b27a4df.js"/><link as="fetch" rel="preload" href="/blog2000/page-data/content/DeployReactToDocker/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog2000/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="10nd30h">.css-10nd30h{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:12px;}</style><div class="css-10nd30h"><div><h1>Run a &#x27;create react app&#x27; app from docker</h1><p>This tutorial is divided in two parts. The first part we will just set up everything to get the app running in docker. In the second part we will look closer into what we did in part 1.</p><h1>Part 1</h1><p>First make sure to have the following installed:</p><ul><li><a href="https://nodejs.org/en/">https://nodejs.org/en/</a></li><li><a href="https://www.docker.com/">https://www.docker.com/</a></li></ul><p>In a terminal run the following commands:</p><pre class="prism-code language-bash" style="color:#393A34;background-color:#f6f8fa;padding:20px"><style data-emotion-css="9is6gx">.css-9is6gx{background-color:pink;}</style><span class="css-9is6gx">bash</span><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">$ npx create-react-app InsertYourAppNameHere</span></div><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> InsertYourAppNameHere</span></div><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> run build</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre><p>You now have a react app in the ./build directory</p><p>Lets put this react app in a docker container by creating a Dockerfile in the same folder:</p><pre class="prism-code language-bash" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx">bash</span><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> Dockerfile</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre><p>In this file paste the following content:</p><pre class="prism-code language-docker" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx">docker</span><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">alpine</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">COPY</span><span class="token plain"> /build /usr/share/nginx/html</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">EXPOSE</span><span class="token plain"> 80</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CMD</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;nginx&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;-g&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;daemon off;&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre><p>You can now run the following commands in the terminal to build and run the docker container:</p><pre class="prism-code language-bash" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx">bash</span><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">$ docker build </span><span class="token builtin class-name">.</span><span class="token plain"> -t react-docker</span></div><div class="token-line" style="color:#393A34"><span class="token plain">$ docker run -p </span><span class="token number" style="color:#36acaa">8000</span><span class="token plain">:80 react-docker</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre><p>You can now visit the url <a href="http://localhost:8000/">http://localhost:8000/</a></p><p>Congratulation, you have deployed your react app inside a docker container!</p><p>Instead of having to run the previous commands every time you want to build and run the docker container, you can use docker-compose. docker-compose has to be installed, and can be found here: <a href="https://docs.docker.com/compose/">https://docs.docker.com/compose/</a></p><p>In the same directory create a new file by running this command:</p><pre class="prism-code language-bash" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx">bash</span><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> docker-compose.yaml</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre><p>In this file paste the following content:</p><pre class="prism-code language-yaml" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx">yaml</span><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> .</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;80:80&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre><p>Now you can run this command to both build and run the docker container:</p><pre class="prism-code language-bash" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx">bash</span><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose up</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre><h1>Part 2</h1><p>We created and built the react app and the dockerfile with the following contents:</p><pre class="prism-code language-docker" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx">docker</span><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">alpine</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">COPY</span><span class="token plain"> /build /usr/share/nginx/html</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">EXPOSE</span><span class="token plain"> 80</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CMD</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;nginx&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;-g&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;daemon off;&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre><p>Lets look into the different parts of the dockerfile:</p><pre class="prism-code language-" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx"></span><div class="token-line" style="color:#393A34"><span class="token plain">FROM nginx:alpine</span></div></pre><p>This part tells docker to use the image <code>nginx:alpine</code> that is available from the docker hub. <a href="https://hub.docker.com/_/nginx">https://hub.docker.com/_/nginx</a>. This is the base for our docker container. It is a linux operating system that includes nginx that is used to serve our react app.</p><pre class="prism-code language-" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx"></span><div class="token-line" style="color:#393A34"><span class="token plain">COPY /build /usr/share/nginx/html</span></div></pre><p>We copy the react app we built into the docker container. We copy it to the location nginx will look for an <code>index.html</code> file to serve. When we start the docker container, nginx will look for the <code>index.html</code> in this location and serve it.</p><pre class="prism-code language-" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx"></span><div class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 80</span></div></pre><p>We need to specify on which port the nginx will serve our app. The port can be any number, but convention is to use port 80.</p><pre class="prism-code language-" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx"></span><div class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span></div></pre><p>There is a lot of magic going on. One of those magics is that nginx will serve the <code>index.html</code> but then shut down right after. The command above prevents nginx from shutting down.</p><pre class="prism-code language-docker" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx">docker</span><div class="token-line" style="color:#393A34"><span class="token plain">a</span></div></pre><p><a href="https://hackernoon.com/so-you-want-to-dockerize-your-react-app-64fbbb74c217">https://hackernoon.com/so-you-want-to-dockerize-your-react-app-64fbbb74c217</a>
<a href="https://mherman.org/blog/dockerizing-a-react-app/">https://mherman.org/blog/dockerizing-a-react-app/</a></p><pre class="prism-code language-" style="color:#393A34;background-color:#f6f8fa;padding:20px"><span class="css-9is6gx"></span><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"> </span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div></pre></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/content/DeployReactToDocker/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-4fc210ce2ce551dd2bb1.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-07a917527009d7e778e2.js"],"component---src-templates-posts-page-layout-js":["/component---src-templates-posts-page-layout-js-38b0d6bad39b7329d9de.js"],"component---src-pages-index-js":["/component---src-pages-index-js-a6c4c91fe37094140b0c.js"],"component---src-pages-index-old-js":["/component---src-pages-index-old-js-3c3f45bd703515d71e25.js"],"component---src-pages-my-files-js":["/component---src-pages-my-files-js-0aed6afc01478ff1cd05.js"]};/*]]>*/</script><script src="/blog2000/webpack-runtime-dc6c6d3488658b27a4df.js" async=""></script><script src="/blog2000/app-4fc210ce2ce551dd2bb1.js" async=""></script><script src="/blog2000/commons-43761f815a48660dedfd.js" async=""></script><script src="/blog2000/component---src-templates-posts-page-layout-js-38b0d6bad39b7329d9de.js" async=""></script></body></html>