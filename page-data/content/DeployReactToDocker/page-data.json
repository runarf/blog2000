{"componentChunkName":"component---src-templates-posts-page-layout-js","path":"/content/DeployReactToDocker/","result":{"data":{"mdx":{"id":"62ed82ef-96ec-50c5-ac09-517b1b6fd505","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Run a 'create react app' app from docker\",\n  \"date\": \"2020-03-04\",\n  \"type\": \"blog\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar CodeBlock = makeShortcode(\"CodeBlock\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This tutorial is divided in two parts. The first part we will just set up everything to get the app running in docker. In the second part we will look closer into what we did in part 1.\"), mdx(\"h1\", null, \"Part 1\"), mdx(\"p\", null, \"First make sure to have the following installed:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://nodejs.org/en/\"\n  }), \"https://nodejs.org/en/\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.docker.com/\"\n  }), \"https://www.docker.com/\"))), mdx(\"p\", null, \"In a terminal run the following commands:\"), mdx(CodeBlock, {\n    className: \"bash\",\n    mdxType: \"CodeBlock\"\n  }, \"\\n$ npx create-react-app InsertYourAppNameHere\\n$ cd InsertYourAppNameHere\\n$ npm run build\\n\"), mdx(\"p\", null, \"You now have a react app in the ./build directory\"), mdx(\"p\", null, \"Lets put this react app in a docker container by creating a Dockerfile in the same folder:\"), mdx(CodeBlock, {\n    className: \"bash\",\n    mdxType: \"CodeBlock\"\n  }, \"\\n$ touch Dockerfile\\n\"), mdx(\"p\", null, \"In this file paste the following content:\"), mdx(CodeBlock, {\n    className: \"docker\",\n    mdxType: \"CodeBlock\"\n  }, \"\\nFROM nginx:alpine\\nCOPY /build /usr/share/nginx/html\\nEXPOSE 80\\nCMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\\n\"), mdx(\"p\", null, \"You can now run the following commands in the terminal to build and run the docker container:\"), mdx(CodeBlock, {\n    className: \"bash\",\n    mdxType: \"CodeBlock\"\n  }, \"\\n$ docker build . -t react-docker\\n$ docker run -p 8000:80 react-docker\\n\"), mdx(\"p\", null, \"You can now visit the url \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8000/\"\n  }), \"http://localhost:8000/\")), mdx(\"p\", null, \"Congratulation, you have deployed your react app inside a docker container!\"), mdx(\"p\", null, \"Instead of having to run the previous commands every time you want to build and run the docker container, you can use docker-compose. docker-compose has to be installed, and can be found here: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.docker.com/compose/\"\n  }), \"https://docs.docker.com/compose/\")), mdx(\"p\", null, \"In the same directory create a new file by running this command:\"), mdx(CodeBlock, {\n    className: \"bash\",\n    mdxType: \"CodeBlock\"\n  }, \"\\n$ touch docker-compose.yaml\\n\"), mdx(\"p\", null, \"In this file paste the following content:\"), mdx(CodeBlock, {\n    className: \"yaml\",\n    mdxType: \"CodeBlock\"\n  }, \"\\nversion: '3'\\nservices:\\n  web:\\n    build: .\\n    ports:\\n      - \\\"80:80\\\"\\n\"), mdx(\"p\", null, \"Now you can run this command to both build and run the docker container:\"), mdx(CodeBlock, {\n    className: \"bash\",\n    mdxType: \"CodeBlock\"\n  }, \"\\n$ docker-compose up\\n\"), mdx(\"h1\", null, \"Part 2\"), mdx(\"p\", null, \"We created and built the react app and the dockerfile with the following contents:\"), mdx(CodeBlock, {\n    className: \"docker\",\n    mdxType: \"CodeBlock\"\n  }, \"\\nFROM nginx:alpine\\nCOPY /build /usr/share/nginx/html\\nEXPOSE 80\\nCMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\\n\"), mdx(\"p\", null, \"Lets look into the different parts of the dockerfile:\"), mdx(CodeBlock, {\n    mdxType: \"CodeBlock\"\n  }, \"FROM nginx:alpine\"), mdx(\"p\", null, \"This part tells docker to use the image \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"nginx:alpine\"), \" that is available from the docker hub. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hub.docker.com/_/nginx\"\n  }), \"https://hub.docker.com/_/nginx\"), \". This is the base for our docker container. It is a linux operating system that includes nginx that is used to serve our react app.\"), mdx(CodeBlock, {\n    mdxType: \"CodeBlock\"\n  }, \"COPY /build /usr/share/nginx/html\"), mdx(\"p\", null, \"We copy the react app we built into the docker container. We copy it to the location nginx will look for an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.html\"), \" file to serve. When we start the docker container, nginx will look for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.html\"), \" in this location and serve it.\"), mdx(CodeBlock, {\n    mdxType: \"CodeBlock\"\n  }, \"EXPOSE 80\"), mdx(\"p\", null, \"We need to specify on which port the nginx will serve our app. The port can be any number, but convention is to use port 80.\"), mdx(CodeBlock, {\n    mdxType: \"CodeBlock\"\n  }, \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\"), mdx(\"p\", null, \"There is a lot of magic going on. One of those magics is that nginx will serve the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.html\"), \" but then shut down right after. The command above prevents nginx from shutting down.\"), mdx(CodeBlock, {\n    className: \"docker\",\n    mdxType: \"CodeBlock\"\n  }, \"a\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hackernoon.com/so-you-want-to-dockerize-your-react-app-64fbbb74c217\"\n  }), \"https://hackernoon.com/so-you-want-to-dockerize-your-react-app-64fbbb74c217\"), \"\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://mherman.org/blog/dockerizing-a-react-app/\"\n  }), \"https://mherman.org/blog/dockerizing-a-react-app/\")), mdx(CodeBlock, {\n    className: \"\",\n    mdxType: \"CodeBlock\"\n  }, \"\\n \\n\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Run a 'create react app' app from docker"}}},"pageContext":{"id":"62ed82ef-96ec-50c5-ac09-517b1b6fd505"}}}